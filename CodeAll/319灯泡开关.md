# 319灯泡开关

### 题目描述

初始时有 `n` 个灯泡处于关闭状态。第一轮，你将会打开所有灯泡。接下来的第二轮，你将会每两个灯泡关闭一个。

第三轮，你每三个灯泡就切换一个灯泡的开关（即，打开变关闭，关闭变打开）。

第 `i` 轮，你每 `i` 个灯泡就切换一个灯泡的开关。直到第 `n` 轮，你只需要切换最后一个灯泡的开关

找出并返回 `n` 轮后有多少个亮着的灯泡。

> 示例
>
> ```
> 输入：n = 3
> 输出：1 
> 解释：
> 初始时, 灯泡状态 [关闭, 关闭, 关闭].
> 第一轮后, 灯泡状态 [开启, 开启, 开启].
> 第二轮后, 灯泡状态 [开启, 关闭, 开启].
> 第三轮后, 灯泡状态 [开启, 关闭, 关闭]. 
> 你应该返回 1，因为只有一个灯泡还亮着。
> ```

### 我的回合

- 属实想了我好久，并且标签中的脑筋急转弯也给了我这题有简单方法的可能性
- 正常思路，每一轮都把自己轮数i的倍数做一个转换，设置一个boolean数组作为灯开关状态表示
- 时间复杂度$$O(n^2)$$,超时!
- 想到将每个i进行一次总的开关计算, i之前为何会被开关呢,因为前面有i的因子,所以考虑计算出i的因子的数目,貌似时间复杂度为$$O(n*log(n))$$ 因为只要遍历到$$\sqrt i$$就找到了所有因子
- 此时!我们发现,i的因子一定是成双成对出现的,那么它的因子一定会进行两次开关,抵消了.加上自己本身的一次关,所以最终就关了......只有一种情况! 那就是它是平方数!!
- 那么此时他就有奇数个因子,最终就开了,\
- 由于1一定是开的,而且1也是平方数, 所以题目变成了 1-n中有几个平方数

```java
class Solution {
    public int bulbSwitch(int n) {
        int res = 0;
        for(int i=1;i*i<=n;i++){
            res+=1;
        }
        return res;
    }
}
```

- 果然脑筋急转弯
- 好吧,答案就是$$\sqrt n$$向下取整,多此一举了

```java
class Solution {
    public int bulbSwitch(int n) {
        return (int) Math.sqrt(n + 0.5);
    }
}

作者：LeetCode-Solution
链接：https://leetcode-cn.com/problems/bulb-switcher/solution/deng-pao-kai-guan-by-leetcode-solution-rrgp/
来源：力扣（LeetCode）
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
```

