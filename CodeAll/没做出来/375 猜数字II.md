# 375 猜数字II

### 题目描述

我们正在玩一个猜数游戏，游戏规则如下：

1. 我从 `1` 到 `n` 之间选择一个数字。
2. 你来猜我选了哪个数字。
3. 如果你猜到正确的数字，就会 **赢得游戏** 。
4. 如果你猜错了，那么我会告诉你，我选的数字比你的 **更大或者更小** ，并且你需要继续猜数。
5. 每当你猜了数字 `x` 并且猜错了的时候，你需要支付金额为 `x` 的现金。如果你花光了钱，就会 **输掉游戏** 。

给你一个特定的数字 `n` ，返回能够 **确保你获胜** 的最小现金数，**不管我选择那个数字** 。



![img](https://assets.leetcode.com/uploads/2020/09/10/graph.png)

```
输入：n = 10
输出：16
```

### 我的回合

- 寄！
- 连续两天没写出来，什么废物

### 官方解法

- 我以为是找规律，一直按照找规律来做的，每四个数字一个循环，然后往上提root，得到结果。结果是他喵的遍历，然后动态规划，麻了

- 用$$ f(i, j)$$表示在范围$$[i,j]$$内确保胜利的最少金额，目标是计算 $$f(1, n)$$。 

  假设第一次猜的数字是 x并且猜错，则需要支付金额 x，当 x 大于所选数字时，为了确保胜利还需要支付的金额是$$ f(1, x - 1)$$，当 x 小于所选数字时，为了确保胜利还需要支付的金额是$$ f(x + 1, n)$$。为了在任何情况下都能确保胜利，应考虑最坏情况，计算$$ f(1, n)$$时应取上述两者的最大值：$$f(1, n) = x + \max(f(1, x - 1), f(x + 1, n))f(1,n)=x+max(f(1,x−1),f(x+1,n))$$。

  然后求所有的最小值

  $$f(1,n)=min_{1≤x≤n}(x+max(f(1,x−1),f(x+1,n)))$$

  由于$$ f(1, x - 1)$$ 和 $$f(x + 1, n)$$ 都是比原始问题$$f(1, n)$$ 规模更小的问题，因此可以使用动态规划的方法求解。

  当$$ i = j $$时范围$$ [i, j]$$ 只包含 1 个数字，所选数字一定是范围内的唯一的数字，不存在猜错的情况，因此$$ f(i, j) = 0$$；当$$ i > j$$时范围$$ [i, j] $$不存在，因此 $$f(i, j) = 0$$。综合上述两种情况可知，动态规划的边界情况是：当 $$i \ge j $$时，$$f(i, j) = 0$$。

  

  - 由于状态转移方程为根据规模小的子问题计算规模大的子问题，因此计算子问题的顺序为先计算规模小的子问题，后计算规模大的子问题，需要注意循环遍历的方向。

  ```java
  class Solution {
      public int getMoneyAmount(int n) {
          int[][] f = new int[n + 2][n + 1];
          for (int i = n - 1; i >= 1; i--) {
              for (int j = i + 1; j <= n; j++) {
                  int minCost = Integer.MAX_VALUE;
                  for (int k = i; k <= j; k++) {
                      int cost = k + Math.max(f[i][k - 1], f[k + 1][j]);
                      minCost = Math.min(minCost, cost);
                  }
                  f[i][j] = minCost;
              }
          }
          return f[1][n];
      }
  }
  
  作者：LeetCode-Solution
  链接：https://leetcode-cn.com/problems/guess-number-higher-or-lower-ii/solution/cai-shu-zi-da-xiao-ii-by-leetcode-soluti-a7vg/
  来源：力扣（LeetCode）
  著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
  ```

  

